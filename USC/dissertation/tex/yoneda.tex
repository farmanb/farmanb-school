\documentclass[dissertation.tex]{subfiles}
\begin{document}

Throughout, we assume that $\mathscr{C}$ and $\mathscr{D}$ are locally small categories; that is, $\Hom{\mathscr{C}}{X,Y}$ is a small set, rather than a proper class, for any two objects $X$ and $Y$ of $\mathscr{C}$.
If $X$ is any object of $\mathscr{C}$, define the presheaf of sets (i.e. a contravariant functor from $\mathscr{C}$ to the category of sets) $h_X \colon \mathscr{C} \rightarrow \mathfrak{Set}$ with object map $X \mapsto \Hom{\mathscr{C}}{\line(1,0){10}, X}$ and arrow map sending $f : Z \rightarrow Y$ to the arrow
\begin{align*}
  f^*(X) \colon \Hom{\mathscr{C}}{Y,X} &\rightarrow \Hom{\mathscr{C}}{Z,X}\\
  g &\mapsto g \circ f.
\end{align*}
Similarly, define a covariant functor $h^X : \mathscr{C} \rightarrow \mathfrak{Set}$ which takes objects to $\Hom{\mathscr{C}}{X,\, \line(1,0){10}}$ and morphisms to
\begin{align*}
  f_*(X) \colon \Hom{\mathscr{C}}{X,Z} &\rightarrow \Hom{\mathscr{C}}{X,Y}\\
  g &\mapsto f \circ g.
\end{align*}

\begin{prop}\label{p.1}
  For any two objects $X$ and $Y$ of $\mathscr{C}$, a morphism $f : Y \rightarrow X$ of $\mathscr{C}$ determines a natural transformation $f_* : h_Y \rightarrow h_X$.
  
  \begin{proof}
    %For this, we suppose that we are given a morphism $f : Y \rightarrow X$ of $\mathscr{C}$.
    For any object $Z$ of $\mathscr{C}$, we see $h_Y(Z) = h^Z(Y)$ and $h_X(Z) = h^Z(X)$, so by the above, we have a morphism
    \begin{align*}
      f_*(Z) \colon h_Y(Z) &\rightarrow h_X(Z)\\
      g &\mapsto f \circ g.
    \end{align*}
    Now we can see that this morphism makes the diagram
    $$\begin{tikzcd}
      Z^\prime\arrow{d}{g} & h_Y(Z)\arrow{d}{g^*_Y}\arrow{r}{f_*(Z)} & h_X(Z)\arrow{d}{g^*_{X}}\\ 
      Z & h_Y(Z^\prime) \arrow{r}{f_*(Z^\prime)} &  h_X(Z^\prime)
    \end{tikzcd}$$
    commute by chasing an element $\varphi : Z \rightarrow Y$ through the diagram.
    Through the top right, we get
    $$\varphi \mapsto f \circ \varphi \mapsto (f \circ \varphi) \circ g $$
    and through the bottom left, we get
    $$\varphi \mapsto \varphi \circ g \mapsto f \circ (\varphi \circ g) $$
    which are the same since function composition is associative.
  \end{proof}
\end{prop}

\begin{rmk}
  By almost exactly the same proof, a morphism $f : Y \rightarrow X$ of $\mathscr{C}$ determines a natural transformation $f^* : h^X \rightarrow h^Y$.
\end{rmk}


%\begin{prop}
%  For any two objects $X$ and $Y$ of $\mathscr{C}$, a morphism $f : Y \rightarr%ow X$ of $\mathscr{C}$ determines a natural transformation $f^* : h^X \rightarr%ow h^Y$.
%  
%  \begin{proof}
%    For any object $Z$ of $\mathscr{C}$, we see that $h^Y(Z) = h_Z(Y)$ and $h^X%(Z) = h_Z(X)$, so by the above, we have a morphism
%    \begin{align*}
%      f^*_Z : h^Y(Z) &\rightarrow h^X(Z)\\
%      g &\mapsto g \circ f
%    \end{align*}
%    Now we can see that this morphism makes the diagram
%    $$\begin{tikzcd}
%      Z\arrow{d}{g} & h^X(Z)\arrow{d}{(g_*)_X} \arrow{r}{f^*_Z} & h^Y(Z)\arrow{%d}{(g_*)_Y}\\
%      Z^\prime & h^X(Z^\prime) \arrow{r}{f^*_{Z^\prime}} & h^Y(Z^\prime)
%    \end{tikzcd}$$
%    commute by chasing an element $\varphi : X \rightarrow Z$ through the diagr%am.
%    Through the top right, we get
%    $$\varphi \mapsto \varphi \circ f \mapsto g \circ (\varphi \circ f)$$
%    and through the bottom left, we get
%    $$\varphi \mapsto g \circ \varphi \mapsto (g \circ \varphi) \circ f$$
%    which are teh same since function composition is associative.
%  \end{proof}
%\end{prop}

\begin{defn}
  A presheaf $F \colon \mathscr{C} \rightarrow \mathfrak{Set}$ is called {\em representable} if there exists an object $X$ of $\mathscr{C}$ and a natural isomorphism $h_X \cong F$.
  We call $X$ the {\em representing object}, and $h_X$ is called a {\em representation} of $F$.
\end{defn}

\begin{defn}
  Given a functor $F : \mathscr{C} \rightarrow \mathscr{D}$, there is an induced map for each object $X$ and $Y$ of $\mathscr{C}$
  \begin{align*}
    \Hom{\mathscr{C}}{X,Y} &\rightarrow \Hom{\mathscr{D}}{F(X), F(Y)}\\
    f &\mapsto F(f).
  \end{align*}
  We say $F$ is {\em faithful} if this map is injective, {\em full} if this map is surjective, and {\em fully faithful} if this map is a bijection.
\end{defn}

\begin{prop}\label{p.2}
  Let $F \colon \mathscr{C} \rightarrow \mathscr{D}$ be a fully faithful functor.
  A morphism $f \colon X \rightarrow Y$ of $\mathscr{C}$ is an isomorphism if and only if $F(f) \colon F(X) \rightarrow F(Y)$ is an isomorphism of $\mathscr{D}$.

  We say that $F$ {\em reflects isomorphisms}.

  \begin{proof}
    If $f$ is an isomorphism, then $F(f)$ is an isomorphism almost by the definition of a functor: 
    $$1_{F(X)} = F(1_X) = F(f \circ f^{-1}) = F(f) \circ F(f^{-1}) \ \text{and}\ 1_{F(Y)} = F(1_Y) = F(f^{-1} \circ f) = F(f^{-1}) \circ F(f).$$
    Conversely, assume that $F(f)$ is an isomorphism with inverse $g : F(Y) \rightarrow F(X)$.
    Since $F$ is full, there exists some $h : Y \rightarrow X$ such that $g = F(h)$.
    Hence
    $$F(1_X) = 1_{F(X)} = F(f) \circ F(h) = F(f \circ h)$$
    and
    $$F(1_Y) = 1_{F(Y)} = F(h) \circ F(f)= F(h \circ f).$$
    Therefore by faithfulness, $h$ is the inverse of $f$, as desired.
  \end{proof}
\end{prop}
\begin{rmk}
  Note that by possibly passing to the opposite category, every functor is covariant.
\end{rmk}

\begin{lem}[Yoneda]
  If $F \colon \mathscr{C} \rightarrow \mathfrak{Sets}$ is any presheaf of sets, then for any object $X$ of $\mathscr{C}$ of $\mathscr{C}$, there is a natural isomorphism of sets
  $$\operatorname{Nat}(h_X, F) \cong F(X).$$

  \begin{proof}
    First we define the morphisms of sets
    \begin{align*}
      \varphi \colon \Nat{h_x, F} &\rightarrow F(X)\\
      \alpha &\mapsto \alpha_X(1_X).
    \end{align*}
    Next we define a morphism of sets $\psi \colon F(X) \rightarrow \Nat{h_x, F}$ as follows:
    given a point $p \in F(X)$, define for each object $Y$ a morphism
    \begin{align*}
      \beta_Y \colon h_X(Y) &\rightarrow F(Y)\\
      f &\mapsto F(f)(p).
    \end{align*}
    Note that $F$ is a presheaf, so $F(f)$ is a morphism from $F(X)$ to $F(Y)$!
    It's easy to see that this definition makes the naturality square
    $$\begin{tikzcd}
      Z\arrow{d}{g} & h_X(Y)\arrow{d}{g^*}\arrow{r}{\beta_Y} & F(Y)\arrow{d}{F(g)}\\
      Y & h_X(Z)\arrow{r}{\beta_Z} & F(Z)
    \end{tikzcd}$$
    since for any $f \in h_X(Y)$
    $$F(g) \circ \beta_X(f) = F(g) \circ F(f) (p) = F(g \circ f)(p) = F(g^*(f))(p) = \beta_Z \circ g^* (f)$$
    and so we let $\beta : h_X \rightarrow F$ be the image of $p$ under $\psi$.
    We show that these these give the desired isomorphism.

    Given a natural transformation $\alpha \colon h_x \rightarrow F$, the element $\alpha_X(1_X)$ of $F(X)$ determines the natural transformation $\beta : h_x \rightarrow F$ with component morphisms
    \begin{align*}
      \beta_Y \colon h_X(Y) &\rightarrow F(Y)\\
      f &\mapsto F(f)(\alpha_X(1_X)).
    \end{align*}
    Chasing the element $1_X$ through the naturality square
    $$\begin{tikzcd}
      Y\arrow{d}{f} & h_X(X)\arrow{d}{f^*}\arrow{r}{\alpha_X} & F(X)\arrow{d}{F(f)}\\
      X & h_X(Y)\arrow{r}{\alpha_Y} & F(Y)
    \end{tikzcd}$$
    we see that for any object $Y$ of $\mathscr{C}$
    $$\beta_Y(f) = F(f) \circ \alpha_X (1_X) = \alpha_y \circ f^*(1_X) = \alpha_Y(1_x \circ f) = \alpha_Y(f)$$
    implies $\psi \circ \varphi(\alpha) = \alpha$.
    Now if $p \in F(X)$, then the natural transformation $\beta : h_X \rightarrow F$ determined by $p$ satisfies
    $$\varphi(\beta) = \beta_X(1_X)(p) = F(1_X)(p) = 1_{F(x)}(p) = p$$
    so that $\varphi \circ \psi (p) = p$, as desired.
    Therefore $\varphi$ is an isomorphism.

    Next we show that $\varphi$ is natural in $X$.
    For this, we suppose that we are given a morphism $f : Y \rightarrow X$ of $\mathscr{C}$.
    By Proposition~\ref{p.1}, this induces a natural transformation $f_* : h_Y \rightarrow h_X$ and so we obtain by composition a morphism, which we call $f^*$ by abuse of notation,
    \begin{align*}
      f^* \colon \Nat{h_X, F} &\rightarrow \Nat{h_Y,F}\\
      \alpha & \mapsto \alpha \circ f_*.
    \end{align*}
    We check that the naturality square
    $$\begin{tikzcd}
      Y\arrow{d}{f} & \Nat{h_X, F}\arrow{r}{\varphi}\arrow{d}{f^*} & F(X)\arrow{d}{F(f)}\\
      X & \Nat{h_Y, F}\arrow{r}{\varphi} & F(Y)
    \end{tikzcd}$$
    commutes by chasing a natural transformation $\alpha : h_X \rightarrow F$ through.
    Through the top right, we have
    $$\alpha \mapsto \alpha_X(1_X) \mapsto F(f)(\alpha_X(1_X))$$
    and through the bottom left, we have
    $$\alpha \mapsto \alpha \circ f_* \mapsto \alpha_Y \circ (f_*)_Y (1_Y) = \alpha_Y(f).$$
    Now by chasing $1_X$ through the naturality square
    $$\begin{tikzcd}
      Y\arrow{d}{f} & h_X(X)\arrow{r}{\alpha_X}\arrow{d}{f^*} & F(X)\arrow{d}{F(f)}\\
      X & h_X(Y)\arrow{r}{\alpha_Y} & F(Y)
    \end{tikzcd}$$
    we see that
    $$F(f)(\alpha_X(1_X)) = \alpha_Y \circ f^* (1_X) = \alpha_Y(f),$$
    as desired.

    Now, for naturality in $F$ we assume that we are given a natural transformation $\beta : F \rightarrow G$.
    Chasing the natural transformation $\alpha : h_x \rightarrow F$ through the naturality square
    $$\begin{tikzcd}
      F\arrow{d}{\beta} & \Nat{h_X, F} \arrow{r}{\varphi}\arrow{d}{\beta_*} & F(X)\arrow{d}{\beta_X} \\
      G & \Nat{h_X, G} \arrow{r}{\varphi} & G(X)
    \end{tikzcd}$$
    we see that
    $$\beta_X \circ \varphi(\alpha) = \beta_X \circ \alpha_X(1_X) = \varphi( \beta \circ \alpha) = \varphi \circ \beta_* ( \alpha).$$
    Therefore $\varphi$ is an isomorphism of sets, natural in both $X$ and $F$.
  \end{proof}
\end{lem}

This lemma allows us to define the Yoneda functor
$$Y : \mathscr{C} \rightarrow \hat{\mathscr{C}} = \operatorname{Fun}(\CC^\text{op}, \mathfrak{Set})$$
where $\operatorname{Fun}(\CC^\text{op}, \mathfrak{Set})$ is the category with objects presheaves of sets on $\mathscr{C}$ and morphisms natural transformations.
This functor takes an object $X$ of $\mathscr{C}$ to the presheaf $h_X$ and takes a morphism $f : Y \rightarrow X$ to the natural transformation $f_* : h_Y \rightarrow h_X$ of Proposition~\ref{p.1}.

\begin{cor}\label{c.1}
  The Yoneda functor is fully faithful.

  \begin{proof}
    We must show that for any two objects $X$ and $X^\prime$ of $\mathscr{C}$, the map of sets
    $$\Hom{\mathscr{C}}{X,X^\prime} = h_{X^\prime} \rightarrow \Nat{h_X,h_{X^\prime}}$$
    is a bijection.
    Taking $F = h_{X^\prime}$ and applying Yoneda's Lemma gives the desired bijection.
  \end{proof}
\end{cor}

\begin{cor}
  Representing objects are unique up to isomorphism.

  \begin{proof}
    Suppose $F$ is a presheaf of sets on $\mathscr{C}$ and $X, X^\prime$ are objects of $\mathscr{C}$ that represent $F$.
    By definition, we have natural isomorphisms $h_X \cong F$ and $h_{X^\prime} \cong F$, so by composing we obtain a natural isomorphism
    $$Y(X) = h_X \cong F \cong h_{X^\prime} \cong Y(X^\prime).$$
    By Corollary~\ref{c.1} and Proposition~\ref{p.2}, $Y$ reflects isomorphisms and thus $X \cong X^\prime$, as desired.
  \end{proof}
\end{cor}
\end{document}

